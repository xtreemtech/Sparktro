import{router as rr}from"@inertiajs/core";import{createHeadManager as re,router as $}from"@inertiajs/core";import{computed as P,defineComponent as oe,h as _,markRaw as H,reactive as ne,ref as j,shallowRef as se}from"vue";import{router as L}from"@inertiajs/core";import{cloneDeep as z}from"es-toolkit";var G={created(){if(!this.$options.remember)return;Array.isArray(this.$options.remember)&&(this.$options.remember={data:this.$options.remember}),typeof this.$options.remember=="string"&&(this.$options.remember={data:[this.$options.remember]}),typeof this.$options.remember.data=="string"&&(this.$options.remember={data:[this.$options.remember.data]});let e=this.$options.remember.key instanceof Function?this.$options.remember.key.call(this):this.$options.remember.key,r=L.restore(e),n=this.$options.remember.data.filter(o=>!(this[o]!==null&&typeof this[o]=="object"&&this[o].__rememberable===!1)),s=o=>this[o]!==null&&typeof this[o]=="object"&&typeof this[o].__remember=="function"&&typeof this[o].__restore=="function";n.forEach(o=>{this[o]!==void 0&&r!==void 0&&r[o]!==void 0&&(s(o)?this[o].__restore(r[o]):this[o]=r[o]),this.$watch(o,()=>{L.remember(n.reduce((a,l)=>({...a,[l]:z(s(l)?this[l].__remember():this[l])}),{}),e)},{immediate:!0,deep:!0})})}},V=G;import{router as C}from"@inertiajs/core";import{cloneDeep as b,isEqual as X}from"es-toolkit";import{get as k,has as Z,set as D}from"es-toolkit/compat";import{reactive as ee,watch as te}from"vue";function x(e,r){let n=typeof e=="string"?e:null,s=(typeof e=="string"?r:e)??{},o=n?C.restore(n):null,a=typeof s=="function"?b(s()):b(s),l=null,f=null,m=t=>t,v=ee({...o?o.data:b(a),isDirty:!1,errors:o?o.errors:{},hasErrors:!1,processing:!1,progress:null,wasSuccessful:!1,recentlySuccessful:!1,data(){return Object.keys(a).reduce((t,i)=>D(t,i,k(this,i)),{})},transform(t){return m=t,this},defaults(t,i){if(typeof s=="function")throw new Error("You cannot call `defaults()` when using a function to define your form data.");return typeof t>"u"?(a=b(this.data()),this.isDirty=!1):a=typeof t=="string"?D(b(a),t,i):Object.assign({},b(a),t),this},reset(...t){let i=typeof s=="function"?b(s()):b(a),d=b(i);return t.length===0?(a=d,Object.assign(this,i)):t.filter(p=>Z(d,p)).forEach(p=>{D(a,p,k(d,p)),D(this,p,k(i,p))}),this},setError(t,i){return Object.assign(this.errors,typeof t=="string"?{[t]:i}:t),this.hasErrors=Object.keys(this.errors).length>0,this},clearErrors(...t){return this.errors=Object.keys(this.errors).reduce((i,d)=>({...i,...t.length>0&&!t.includes(d)?{[d]:this.errors[d]}:{}}),{}),this.hasErrors=Object.keys(this.errors).length>0,this},submit(...t){let i=typeof t[0]=="object",d=i?t[0].method:t[0],p=i?t[0].url:t[1],u=(i?t[1]:t[2])??{},F=m(this.data()),T={...u,onCancelToken:c=>{if(l=c,u.onCancelToken)return u.onCancelToken(c)},onBefore:c=>{if(this.wasSuccessful=!1,this.recentlySuccessful=!1,clearTimeout(f),u.onBefore)return u.onBefore(c)},onStart:c=>{if(this.processing=!0,u.onStart)return u.onStart(c)},onProgress:c=>{if(this.progress=c,u.onProgress)return u.onProgress(c)},onSuccess:async c=>{this.processing=!1,this.progress=null,this.clearErrors(),this.wasSuccessful=!0,this.recentlySuccessful=!0,f=setTimeout(()=>this.recentlySuccessful=!1,2e3);let w=u.onSuccess?await u.onSuccess(c):null;return a=b(this.data()),this.isDirty=!1,w},onError:c=>{if(this.processing=!1,this.progress=null,this.clearErrors().setError(c),u.onError)return u.onError(c)},onCancel:()=>{if(this.processing=!1,this.progress=null,u.onCancel)return u.onCancel()},onFinish:c=>{if(this.processing=!1,this.progress=null,l=null,u.onFinish)return u.onFinish(c)}};d==="delete"?C.delete(p,{...T,data:F}):C[d](p,F,T)},get(t,i){this.submit("get",t,i)},post(t,i){this.submit("post",t,i)},put(t,i){this.submit("put",t,i)},patch(t,i){this.submit("patch",t,i)},delete(t,i){this.submit("delete",t,i)},cancel(){l&&l.cancel()},__rememberable:n===null,__remember(){return{data:this.data(),errors:this.errors}},__restore(t){Object.assign(this,t.data),this.setError(t.errors)}});return te(v,t=>{v.isDirty=!X(v.data(),a),n&&C.remember(b(t.__remember()),n)},{immediate:!0,deep:!0}),v}var y=j(null),h=j(null),I=se(null),A=j(null),E=null,ie=oe({name:"Inertia",props:{initialPage:{type:Object,required:!0},initialComponent:{type:Object,required:!1},resolveComponent:{type:Function,required:!1},titleCallback:{type:Function,required:!1,default:e=>e},onHeadUpdate:{type:Function,required:!1,default:()=>()=>{}}},setup({initialPage:e,initialComponent:r,resolveComponent:n,titleCallback:s,onHeadUpdate:o}){y.value=r?H(r):null,h.value=e,A.value=null;let a=typeof window>"u";return E=re(a,s,o),a||($.init({initialPage:e,resolveComponent:n,swapComponent:async l=>{y.value=H(l.component),h.value=l.page,A.value=l.preserveState?A.value:Date.now()}}),$.on("navigate",()=>E.forceUpdate())),()=>{if(y.value){y.value.inheritAttrs=!!y.value.inheritAttrs;let l=_(y.value,{...h.value.props,key:A.value});return I.value&&(y.value.layout=I.value,I.value=null),y.value.layout?typeof y.value.layout=="function"?y.value.layout(_,l):(Array.isArray(y.value.layout)?y.value.layout:[y.value.layout]).concat(l).reverse().reduce((f,m)=>(m.inheritAttrs=!!m.inheritAttrs,_(m,{...h.value.props},()=>f))):l}}}}),B=ie,q={install(e){$.form=x,Object.defineProperty(e.config.globalProperties,"$inertia",{get:()=>$}),Object.defineProperty(e.config.globalProperties,"$page",{get:()=>h.value}),Object.defineProperty(e.config.globalProperties,"$headManager",{get:()=>E}),e.mixin(V)}};function ae(){return ne({props:P(()=>h.value?.props),url:P(()=>h.value?.url),component:P(()=>h.value?.component),version:P(()=>h.value?.version),clearHistory:P(()=>h.value?.clearHistory),deferredProps:P(()=>h.value?.deferredProps),mergeProps:P(()=>h.value?.mergeProps),deepMergeProps:P(()=>h.value?.deepMergeProps),rememberedState:P(()=>h.value?.rememberedState),encryptHistory:P(()=>h.value?.encryptHistory)})}import{router as le,setupProgress as ue}from"@inertiajs/core";import{createSSRApp as pe,h as ce}from"vue";async function K({id:e="app",resolve:r,setup:n,title:s,progress:o={},page:a,render:l}){let f=typeof window>"u",m=f?null:document.getElementById(e),v=a||JSON.parse(m.dataset.page),t=p=>Promise.resolve(r(p)).then(u=>u.default||u),i=[],d=await Promise.all([t(v.component),le.decryptHistory().catch(()=>{})]).then(([p])=>n({el:m,App:B,props:{initialPage:v,initialComponent:p,resolveComponent:t,titleCallback:s,onHeadUpdate:f?u=>i=u:null},plugin:q}));if(!f&&o&&ue(o),f){let p=await l(pe({render:()=>ce("div",{id:e,"data-page":JSON.stringify(v),innerHTML:d?l(d):""})}));return{head:i,body:p}}}import{defineComponent as fe}from"vue";var me=fe({name:"Deferred",props:{data:{type:[String,Array],required:!0}},render(){let e=Array.isArray(this.$props.data)?this.$props.data:[this.$props.data];if(!this.$slots.fallback)throw new Error("`<Deferred>` requires a `<template #fallback>` slot");return e.every(r=>this.$page.props[r]!==void 0)?this.$slots.default():this.$slots.fallback()}});import{defineComponent as de}from"vue";var he=de({props:{title:{type:String,required:!1}},data(){return{provider:this.$headManager.createProvider()}},beforeUnmount(){this.provider.disconnect()},methods:{isUnaryTag(e){return["area","base","br","col","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"].indexOf(e.type)>-1},renderTagStart(e){e.props=e.props||{},e.props.inertia=e.props["head-key"]!==void 0?e.props["head-key"]:"";let r=Object.keys(e.props).reduce((n,s)=>{let o=e.props[s];return["key","head-key"].includes(s)?n:o===""?n+` ${s}`:n+` ${s}="${o}"`},"");return`<${e.type}${r}>`},renderTagChildren(e){return typeof e.children=="string"?e.children:e.children.reduce((r,n)=>r+this.renderTag(n),"")},isFunctionNode(e){return typeof e.type=="function"},isComponentNode(e){return typeof e.type=="object"},isCommentNode(e){return/(comment|cmt)/i.test(e.type.toString())},isFragmentNode(e){return/(fragment|fgt|symbol\(\))/i.test(e.type.toString())},isTextNode(e){return/(text|txt)/i.test(e.type.toString())},renderTag(e){if(this.isTextNode(e))return e.children;if(this.isFragmentNode(e))return"";if(this.isCommentNode(e))return"";let r=this.renderTagStart(e);return e.children&&(r+=this.renderTagChildren(e)),this.isUnaryTag(e)||(r+=`</${e.type}>`),r},addTitleElement(e){return this.title&&!e.find(r=>r.startsWith("<title"))&&e.push(`<title inertia>${this.title}</title>`),e},renderNodes(e){return this.addTitleElement(e.flatMap(r=>this.resolveNode(r)).map(r=>this.renderTag(r)).filter(r=>r))},resolveNode(e){return this.isFunctionNode(e)?this.resolveNode(e.type()):this.isComponentNode(e)?(console.warn("Using components in the <Head> component is not supported."),[]):this.isTextNode(e)&&e.children?e:this.isFragmentNode(e)&&e.children?e.children.flatMap(r=>this.resolveNode(r)):this.isCommentNode(e)?[]:e}},render(){this.provider.update(this.renderNodes(this.$slots.default?this.$slots.default():[]))}}),ge=he;import{mergeDataIntoQueryString as ye,router as M,shouldIntercept as R}from"@inertiajs/core";import{computed as O,defineComponent as ve,h as be,onMounted as Pe,onUnmounted as Fe,ref as U}from"vue";var Te=ve({name:"Link",props:{as:{type:String,default:"a"},data:{type:Object,default:()=>({})},href:{type:[String,Object],required:!0},method:{type:String,default:"get"},replace:{type:Boolean,default:!1},preserveScroll:{type:Boolean,default:!1},preserveState:{type:Boolean,default:null},only:{type:Array,default:()=>[]},except:{type:Array,default:()=>[]},headers:{type:Object,default:()=>({})},queryStringArrayFormat:{type:String,default:"brackets"},async:{type:Boolean,default:!1},prefetch:{type:[Boolean,String,Array],default:!1},cacheFor:{type:[Number,String,Array],default:0},onStart:{type:Function,default:e=>{}},onProgress:{type:Function,default:()=>{}},onFinish:{type:Function,default:()=>{}},onBefore:{type:Function,default:()=>{}},onCancel:{type:Function,default:()=>{}},onSuccess:{type:Function,default:()=>{}},onError:{type:Function,default:()=>{}},onCancelToken:{type:Function,default:()=>{}}},setup(e,{slots:r,attrs:n}){let s=U(0),o=U(null),a=e.prefetch===!0?["hover"]:e.prefetch===!1?[]:Array.isArray(e.prefetch)?e.prefetch:[e.prefetch],l=e.cacheFor!==0?e.cacheFor:a.length===1&&a[0]==="click"?0:3e4;Pe(()=>{a.includes("mount")&&F()}),Fe(()=>{clearTimeout(o.value)});let f=typeof e.href=="object"?e.href.method:e.method.toLowerCase(),m=f!=="get"?"button":e.as.toLowerCase(),v=O(()=>ye(f,typeof e.href=="object"?e.href.url:e.href||"",e.data,e.queryStringArrayFormat)),t=O(()=>v.value[0]),i=O(()=>v.value[1]),d=O(()=>({a:{href:t.value},button:{type:"button"}})),p={data:i.value,method:f,replace:e.replace,preserveScroll:e.preserveScroll,preserveState:e.preserveState??f!=="get",only:e.only,except:e.except,headers:e.headers,async:e.async},u={...p,onCancelToken:e.onCancelToken,onBefore:e.onBefore,onStart:g=>{s.value++,e.onStart(g)},onProgress:e.onProgress,onFinish:g=>{s.value--,e.onFinish(g)},onCancel:e.onCancel,onSuccess:e.onSuccess,onError:e.onError},F=()=>{M.prefetch(t.value,p,{cacheFor:l})},T={onClick:g=>{R(g)&&(g.preventDefault(),M.visit(t.value,u))}},c={onMouseenter:()=>{o.value=setTimeout(()=>{F()},75)},onMouseleave:()=>{clearTimeout(o.value)},onClick:T.onClick},w={onMousedown:g=>{R(g)&&(g.preventDefault(),F())},onMouseup:g=>{g.preventDefault(),M.visit(t.value,u)},onClick:g=>{R(g)&&g.preventDefault()}};return()=>be(m,{...n,...d.value[m]||{},"data-loading":s.value>0?"":void 0,...a.includes("hover")?c:a.includes("click")?w:T},r)}}),Se=Te;import{router as Ce}from"@inertiajs/core";import{onMounted as De,onUnmounted as xe}from"vue";function W(e,r={},n={keepAlive:!1,autoStart:!0}){let{stop:s,start:o}=Ce.poll(e,r,{...n,autoStart:!1});return De(()=>{(n.autoStart??!0)&&o()}),xe(()=>{s()}),{stop:s,start:o}}import{router as S}from"@inertiajs/core";import{onMounted as Ae,onUnmounted as $e,ref as N}from"vue";function J(e={}){let r=N(!1),n=N(null),s=N(!1),o=typeof window>"u"?null:S.getCached(window.location.pathname,e),a=typeof window>"u"?null:S.getPrefetching(window.location.pathname,e);n.value=o?.staleTimestamp||null,r.value=a!==null,s.value=o!==null;let l,f;return Ae(()=>{f=S.on("prefetching",m=>{m.detail.visit.url.pathname===window.location.pathname&&(r.value=!0)}),l=S.on("prefetched",m=>{m.detail.visit.url.pathname===window.location.pathname&&(r.value=!1,s.value=!0)})}),$e(()=>{l(),f()}),{lastUpdatedAt:n,isPrefetching:r,isPrefetched:s,flush:()=>S.flush(window.location.pathname,e)}}import{router as Y}from"@inertiajs/core";import{cloneDeep as Oe}from"es-toolkit";import{isReactive as we,reactive as ke,ref as _e,watch as Ie}from"vue";function Q(e,r){if(typeof e=="object"&&e!==null&&e.__rememberable===!1)return e;let n=Y.restore(r),s=we(e)?ke:_e,o=typeof e.__remember=="function"&&typeof e.__restore=="function",a=s(n===void 0?e:o?e.__restore(n):n);return Ie(a,l=>{Y.remember(Oe(o?e.__remember():l),r)},{immediate:!0,deep:!0}),a}import{router as Ee}from"@inertiajs/core";import{defineComponent as je,h as Me}from"vue";var Re=je({name:"WhenVisible",props:{data:{type:[String,Array]},params:{type:Object},buffer:{type:Number,default:0},as:{type:String,default:"div"},always:{type:Boolean,default:!1}},data(){return{loaded:!1,fetching:!1,observer:null}},unmounted(){this.observer?.disconnect()},mounted(){this.observer=new IntersectionObserver(e=>{if(!e[0].isIntersecting||(this.$props.always||this.observer.disconnect(),this.fetching))return;this.fetching=!0;let r=this.getReloadParams();Ee.reload({...r,onStart:n=>{this.fetching=!0,r.onStart?.(n)},onFinish:n=>{this.loaded=!0,this.fetching=!1,r.onFinish?.(n)}})},{rootMargin:`${this.$props.buffer}px`}),this.observer.observe(this.$el.nextSibling)},methods:{getReloadParams(){if(this.$props.data)return{only:Array.isArray(this.$props.data)?this.$props.data:[this.$props.data]};if(!this.$props.params)throw new Error("You must provide either a `data` or `params` prop.");return this.$props.params}},render(){let e=[];return(this.$props.always||!this.loaded)&&e.push(Me(this.$props.as)),this.loaded?this.$slots.default&&e.push(this.$slots.default()):e.push(this.$slots.fallback?this.$slots.fallback():null),e}});export{me as Deferred,ge as Head,Se as Link,Re as WhenVisible,K as createInertiaApp,rr as router,x as useForm,ae as usePage,W as usePoll,J as usePrefetch,Q as useRemember};
//# sourceMappingURL=index.esm.js.map
